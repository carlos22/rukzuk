<?php

namespace Orm\Repository;

use Doctrine\ORM\EntityRepository;

/**
 * OptInRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class OptInRepository extends EntityRepository
{
    /**
   * @param  array  $ids
   * @param  string $mode
   * @return array
   */
  public function deleteByUserIdsAndMode(array $ids, $mode)
  {
    $dql = 'DELETE FROM Orm\\Entity\\OptIn o WHERE o.userid IN (:ids) AND o.mode = :mode';
    
    $query = $this->_em->createQuery($dql);
    $query->setParameter('ids', $ids);
    $query->setParameter('mode', $mode);
    return $query->getResult();
  }
}
