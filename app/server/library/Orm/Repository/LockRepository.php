<?php
namespace Orm\Repository;

use Doctrine\ORM\EntityRepository;

/**
 * LockRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class LockRepository extends EntityRepository
{
  /**
   * @param string  $websiteId
   * @param string  $type
   * @return array
   */
  public function findByWebsiteId($websiteId)
  {
    $dql = 'SELECT DISTINCT l FROM Orm\\Entity\\Lock l'
      . ' WHERE l.websiteid  = :websiteid';

    $query = $this->_em->createQuery($dql);
    $query->setParameters(array(
      'websiteid' => $websiteId
    ));
    return $query->getResult();
  }

  /**
   * @param string  $websiteId
   * @param string  $type
   * @return array
   */
  public function findByWebsiteIdAndType($websiteId, $type)
  {
    $dql = 'SELECT DISTINCT l FROM Orm\\Entity\\Lock l'
      . ' WHERE l.websiteid  = :websiteid '
      . ' AND l.type = :type';

    $query = $this->_em->createQuery($dql);
    $query->setParameters(array(
      'websiteid' => $websiteId,
      'type' => $type
    ));
    return $query->getResult();
  }
}
